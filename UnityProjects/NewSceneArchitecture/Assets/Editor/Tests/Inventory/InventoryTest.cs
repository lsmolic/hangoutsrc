using System;
using System.Collections.Generic;
using System.Text;
using System.Xml;
using Hangout.Client;
using Hangout.Shared;

namespace Hangout.Shared.UnitTest
{
    [TestFixture]
    public class InventoryTest
    {
        private string xmlString = "<Response noun=\"HangoutStore\" verb=\"GetStoreInventory\"><store id=\"591\" name=\"Test_Store_1\" applicationName=\"HANGOUT_FAMILY_Application_1\" description=\"Welcome to Test Store 1.\" currencyName=\"HOUTS\" currencyId=\"1247519652409\"><itemTypes><itemType id=\"34\" name=\"Tops\" items=\"0\" /><itemType id=\"35\" name=\"Pants\" items=\"0\" /><itemType id=\"64\" name=\"Sporting Good\" items=\"0\" /><itemType id=\"65\" name=\"Decoration\" items=\"0\" /><itemType id=\"66\" name=\"Entertainment\" items=\"0\" /><itemType id=\"36\" name=\"shirt\" items=\"0\" /><itemType id=\"37\" name=\"party\" items=\"0\" /><itemType id=\"63\" name=\"Food\" items=\"0\" /><itemType id=\"62\" name=\"Accessory\" items=\"0\" /><itemType id=\"61\" name=\"Furniture\" items=\"8\" /></itemTypes><itemOffers startIndex=\"0\" blockSize=\"9\" skipCount=\"false\" total=\"41\"><itemOffer endDate=\"2009/08/20 01:00:00 PDT\" numAvailable=\"-1\" startDate=\"2009/08/12 15:30:47 PDT\" title=\"Plush large grandfather upholstered armchair.\" description=\"Plush large grandfather upholstered armchair.\" id=\"408\"><item id=\"221\" name=\"Armchair\" appName=\"HANGOUT_FAMILY_Application_1\" itemTypeName=\"Furniture\" buttonName=\"e35698fdff0f84bf898fe060f6a2119a\" description=\"Green rounded upholstered armchair.\" smallImageUrl=\"http://blogs.miaminewtimes.com/riptide/Fernando_&amp;_Humberto_Campana_Leatherworks_Armchair_i6c.jpg\" mediumImageUrl=\"\" largeImageUrl=\"http://hangout.net/token/roomObjects/00000000/00000111.unity3dres\" available=\"-1\"><properties /></item><price><money currencyId=\"1247519652409\" currencyName=\"HOUTS\" amount=\"150.0000\" /></price><tradeInItems /></itemOffer><itemOffer endDate=\"2050/01/01 00:00:00 PST\" numAvailable=\"-1\" startDate=\"2009/08/12 15:30:47 PDT\" title=\"Green rounded upholstered armchair.\" description=\"Green rounded upholstered armchair.\" id=\"413\"><item id=\"221\" name=\"Armchair\" appName=\"HANGOUT_FAMILY_Application_1\" itemTypeName=\"Furniture\" buttonName=\"e35698fdff0f84bf898fe060f6a2119a\" description=\"Green rounded upholstered armchair.\" smallImageUrl=\"http://blogs.miaminewtimes.com/riptide/Fernando_&amp;_Humberto_Campana_Leatherworks_Armchair_i6c.jpg\" mediumImageUrl=\"\" largeImageUrl=\"http://hangout.net/token/roomObjects/00000000/00000111.unity3dres\" available=\"-1\"><properties /></item><price><money currencyId=\"1247519652409\" currencyName=\"HOUTS\" amount=\"125.0000\" /></price><tradeInItems /></itemOffer><itemOffer endDate=\"2050/01/01 00:00:00 PST\" numAvailable=\"-3\" startDate=\"2009/08/12 15:30:47 PDT\" title=\"Ikea basic backless wood and metal bar stool.\" description=\"Ikea basic backless wood and metal bar stool.\" id=\"419\"><item id=\"231\" name=\"Bar Stool\" appName=\"HANGOUT_FAMILY_Application_1\" itemTypeName=\"Furniture\" buttonName=\"17ca537499eb04ddd87dc77522e4a384\" description=\"Ikea basic backless wood and metal bar stool.\" smallImageUrl=\"http://www.hospitalitybarstools.com/wp-content/uploads/2007/08/norman_cherner_barstool.jpg\" mediumImageUrl=\"\" largeImageUrl=\"http://hangout.net/token/roomObjects/00000000/00000118.unity3dres\" available=\"8\"><properties /></item><price><money currencyId=\"1247519652409\" currencyName=\"HOUTS\" amount=\"100.0000\" /></price><tradeInItems /></itemOffer><itemOffer endDate=\"2009/08/30 01:00:00 PDT\" numAvailable=\"-2\" startDate=\"2009/08/12 15:30:48 PDT\" title=\"Offer Cabana Mat Houts\" description=\"Offer Cabana Mat Houts\" id=\"444\"><item id=\"178\" name=\"Cabana Mat\" appName=\"HANGOUT_FAMILY_Application_1\" itemTypeName=\"Furniture\" buttonName=\"9f78ccea761d6470d8159508bfc85f4d\" description=\"A floor mat, woven from palm leaves.\" smallImageUrl=\"http://hangout.net/token/roomObjects/00000000/00000051.png\" mediumImageUrl=\"\" largeImageUrl=\"http://hangout.net/token/roomObjects/00000000/00000051.unity3dres\" available=\"-1\"><properties /></item><price><money currencyId=\"1247519652409\" currencyName=\"HOUTS\" amount=\"5.0000\" /></price><tradeInItems /></itemOffer><itemOffer endDate=\"2009/12/31 00:00:00 PST\" numAvailable=\"-1\" startDate=\"2009/08/12 15:30:47 PDT\" title=\"Ikea modern square coffee table.\" description=\"Ikea modern square coffee table.\" id=\"431\"><item id=\"182\" name=\"Coffee Table\" appName=\"HANGOUT_FAMILY_Application_1\" itemTypeName=\"Furniture\" buttonName=\"a88bb85053c6947f4885f2fd7ba66a7c\" description=\"A low wood table.\" smallImageUrl=\"http://hangout.net/token/roomObjects/00000000/00000783.png\" mediumImageUrl=\"\" largeImageUrl=\"http://hangout.net/token/roomObjects/00000000/00000364.unity3dres\" available=\"99\"><properties /></item><price><money currencyId=\"1247519652409\" currencyName=\"HOUTS\" amount=\"100.0000\" /></price><tradeInItems /></itemOffer><itemOffer endDate=\"2050/01/01 00:00:00 PST\" numAvailable=\"-1\" startDate=\"2009/08/12 15:30:48 PDT\" title=\"Wide low back wood chair.\" description=\"Wide low back wood chair.\" id=\"439\"><item id=\"250\" name=\"Curule Chair\" appName=\"HANGOUT_FAMILY_Application_1\" itemTypeName=\"Furniture\" buttonName=\"e59f1719a022d4fcfae32e2574a51ffd\" description=\"Wide low back wood chair.\" smallImageUrl=\"http://hangout.net/token/roomObjects/00000000/00000151.png\" mediumImageUrl=\"\" largeImageUrl=\"http://hangout.net/token/roomObjects/00000000/00000151.unity3dres\" available=\"-1\"><properties /></item><price><money currencyId=\"1247519652409\" currencyName=\"HOUTS\" amount=\"120.0000\" /></price><tradeInItems /></itemOffer><itemOffer endDate=\"2009/12/31 00:00:00 PST\" numAvailable=\"-1\" startDate=\"2009/08/12 15:30:47 PDT\" title=\"Ikea basic wood rectangular computer desk.\" description=\"Ikea basic wood rectangular computer desk.\" id=\"432\"><item id=\"243\" name=\"Desk\" appName=\"HANGOUT_FAMILY_Application_1\" itemTypeName=\"Furniture\" buttonName=\"f5339b32576854068b4b6c510195f37f\" description=\"Ikea basic wood rectangular computer desk.\" smallImageUrl=\"http://hangout.net/token/roomObjects/00003000/00003204.png\" mediumImageUrl=\"\" largeImageUrl=\"\" available=\"-1\"><properties /></item><price><money currencyId=\"1247519652409\" currencyName=\"HOUTS\" amount=\"100.0000\" /></price><tradeInItems /></itemOffer><itemOffer endDate=\"2009/12/31 00:00:00 PST\" numAvailable=\"-1\" startDate=\"2009/08/12 15:30:47 PDT\" title=\"Ikea basic round wood eating table.\" description=\"Ikea basic round wood eating table.\" id=\"434\"><item id=\"245\" name=\"Dining Table\" appName=\"HANGOUT_FAMILY_Application_1\" itemTypeName=\"Furniture\" buttonName=\"9919c099e44244179b9d550c67fc4eb8\" description=\"Ikea basic round wood eating table.\" smallImageUrl=\"http://hangout.net/token/roomObjects/00000000/00000146.png\" mediumImageUrl=\"\" largeImageUrl=\"http://hangout.net/token/roomObjects/00000000/00000146.unity3dres\" available=\"-1\"><properties /></item><price><money currencyId=\"1247519652409\" currencyName=\"HOUTS\" amount=\"200.0000\" /></price><tradeInItems /></itemOffer><itemOffer endDate=\"2050/01/01 00:00:00 PST\" numAvailable=\"-2\" startDate=\"2009/08/12 15:30:47 PDT\" title=\"Green basic wood famed futon.\" description=\"Green basic wood famed futon.\" id=\"414\"><item id=\"226\" name=\"Futon\" appName=\"HANGOUT_FAMILY_Application_1\" itemTypeName=\"Furniture\" buttonName=\"a5c050ebe194c40849b0a8bdfd0c1673\" description=\"Green basic wood famed futon.\" smallImageUrl=\"http://hangout.net/token/roomObjects/00000000/00000112.png\" mediumImageUrl=\"\" largeImageUrl=\"http://hangout.net/token/roomObjects/00000000/00000112.unity3dres\" available=\"-1\"><properties /></item><price><money currencyId=\"1247519652409\" currencyName=\"HOUTS\" amount=\"125.0000\" /></price><tradeInItems /></itemOffer></itemOffers></store></Response>";

        [Test]
        public void TestXmlStructure()
        {
            // This is the response coming back from GetStoreInventory(storeName, startIndex, blockSize)
            XmlDocument xmlResponse = new XmlDocument();
            xmlResponse.LoadXml(xmlString);
            
            // Get a list of items
            XmlNodeList itemOfferList = xmlResponse.SelectNodes("//store/itemOffers/itemOffer/item");

            Assert.AreEqual(itemOfferList.Count, 9);
			/*
            foreach (XmlElement itemOfferNode in itemOfferList)
            {            
                string description = itemOfferNode.GetAttribute("description");
                string itemName = itemOfferNode.GetAttribute("name");
                string thumbnailUrl = itemOfferNode.GetAttribute("smallImageUrl");
//                string detailUrl = itemOfferNode.GetAttribute("largeImageUrl");
                string uniqueId = itemOfferNode.GetAttribute("buttonName"); // TODO:  the name of this attribute will be changed to itemId
                string itemOfferId = ((XmlElement)itemOfferNode.ParentNode).GetAttribute("id");
            }
*/
        }

    }
}
